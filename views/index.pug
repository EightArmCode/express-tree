doctype html
html(lang=en)
head
  meta(charset='utf-8')
  meta(name='viewport', content='width=device-width, initial-scale=1')
  title('Express-Vue-Tree')
  
  link(rel='stylesheet', href='/App.css' nonce=cspNonce)
|
body
  div#app
  script(type='importmap' nonce=cspNonce).
    {
      "imports": {
        "vue": "https://unpkg.com/vue@3.4.26/dist/vue.esm-browser.js",
        "d3-hierarchy": "https://cdn.jsdelivr.net/npm/d3-hierarchy@3.1.2/+esm",
        "d3-scale": "https://cdn.jsdelivr.net/npm/d3-scale@4.0.2/+esm",
        "d3-shape": "https://cdn.jsdelivr.net/npm/d3-shape@3.2.0/+esm",
        "axios": "https://unpkg.com/axios@1.6.8/dist/esm/axios.min.js"
      }
    }
  script(type='module' nonce=cspNonce).
    import { createApp, ref, shallowRef, toValue, nextTick, computed } from 'vue'
    import App from './main.js'

    console.log('rendered with love by PUG')
    const webDomain = '#{domain}'

    const treeApp = createApp(App)
    treeApp.provide('domain', webDomain)
    
    if (document.getElementById('app')) {
      treeApp.mount('#app')
    }

